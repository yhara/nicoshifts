#!/usr/bin/env ruby
$LOAD_PATH.unshift File.expand_path("../lib", File.dirname(__FILE__))
require 'nicoshifts'
require 'slim'
require 'slop'

opts = Slop.parse!(:help => true) do
  on 'p', 'port', true,        :default => 2525, :as => :integer
#  on      'prefix', true,      :default => ""
#  on      'data', true,        :default => "~/.moneyrail.db"
end

conf = NicoShifts::Conf.get
$nv = Nicovideo.new(conf['mail'], conf['password'])

puts "Starting nicoshifts server on port #{opts[:port]}..."
NicoShifts::Server.run! :port => opts[:port]
